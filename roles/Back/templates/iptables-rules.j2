# Generated by Ansible
*filter
:INPUT DROP [0:0]
:FORWARD ACCEPT [0:0]
:OUTPUT ACCEPT [0:0]

# Allow SSH
-A INPUT -p tcp -s 192.168.1.54/32 --dport {{ ssh_port }} -j ACCEPT -m comment --comment "SSH"

# Allow n8n
-A INPUT -p tcp -s 192.168.1.200/32 --dport {{ n8n_port }} -j ACCEPT -m comment --comment "n8n"

# Allow Prometheus
-A INPUT -p tcp -s 192.168.1.230/32 --dport 9100 -j ACCEPT -m comment --comment "Prometheus"

# Allow Prometheus
-A INPUT -p tcp -s 192.168.1.230/32 --dport 5432 -j ACCEPT -m comment --comment "filebeat"


# Allow established and related connections
-A INPUT -m conntrack --ctstate ESTABLISHED,RELATED -j ACCEPT -m comment --comment "Established connections"

# Allow loopback
-A INPUT -i lo -j ACCEPT -m comment --comment "Loopback"

# ICMP (ping)
-A INPUT -p icmp -j ACCEPT -m comment --comment "ICMP"

COMMIT